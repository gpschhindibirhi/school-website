<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Gallery of Government Primary School, Chhindibirhi - Photos of school activities." />
  <title>‡§ó‡•à‡§≤‡§∞‡•Ä - ‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ, ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="images/school-logo.png" type="image/png" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <!--Remove Frome Here If Error-->
    <!-- Primary Meta Tags -->
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Basic SEO Meta Tags -->
    <title>‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä | ‡§∞‡§æ‡§ú‡§®‡§æ‡§Ç‡§¶‡§ó‡§æ‡§Å‡§µ, ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º</title>
    <meta name="description" content="‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä, ‡§∞‡§æ‡§ú‡§®‡§æ‡§Ç‡§¶‡§ó‡§æ‡§Å‡§µ, ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•§ ‡§®‡§ø‡§É‡§∂‡•Å‡§≤‡•ç‡§ï ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§Æ‡§ß‡•ç‡§Ø‡§æ‡§π‡•ç‡§® ‡§≠‡•ã‡§ú‡§®, ‡§î‡§∞ ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Å‡•§ ‡§ï‡§ï‡•ç‡§∑‡§æ 1-5 ‡§Æ‡•á‡§Ç ‡§¶‡§æ‡§ñ‡§ø‡§≤‡§æ ‡§≤‡•á‡§Ç!">
    <meta name="keywords" content="‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä, government primary school Chhindibirhi, primary school Rajnandgaon, free education Chhattisgarh, school admissions Rajnandgaon">
    <meta name="author" content="Government Primary School Chhindibirhi">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Hindi, English">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Government Primary School Chhindibirhi | Rajnandgaon">
    <meta property="og:description" content="Quality free education at Government Primary School Chhindibirhi, Rajnandgaon, Chhattisgarh.">
    <meta property="og:image" content="https://gps-chhindibirhi.netlify.app/images/school-front.jpg">
    <meta property="og:url" content="https://gps-chhindibirhi.netlify.app/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Government Primary School Chhindibirhi">

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä | ‡§∞‡§æ‡§ú‡§®‡§æ‡§Ç‡§¶‡§ó‡§æ‡§Å‡§µ">
    <meta name="twitter:description" content="‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä, ‡§∞‡§æ‡§ú‡§®‡§æ‡§Ç‡§¶‡§ó‡§æ‡§Å‡§µ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§É‡§∂‡•Å‡§≤‡•ç‡§ï ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ‡•§">
    <meta name="twitter:image" content="https://gps-chhindibirhi.netlify.app/images/school-front.jpg">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://gps-chhindibirhi.netlify.app/">

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- Schema Markup for School (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "School",
      "name": "Government Primary School Chhindibirhi",
      "alternateName": "‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä",
      "description": "Government-run primary school in Chhindibirhi, Rajnandgaon, Chhattisgarh, offering free education, mid-day meals, and modern facilities for Classes 1-5.",
      "url": "https://gps-chhindibirhi.netlify.app/",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Chhindibirhi Village",
        "addressLocality": "Rajnandgaon",
        "addressRegion": "Chhattisgarh",
        "postalCode": "491441",
        "addressCountry": "IN"
      },
      "telephone": "+91-7000810232",
      "email": "gps.chhindibirhi@gmail.com",
      "educationalLevel": "Primary School",
      "curriculum": "Chhattisgarh Board",
      "openingHours": "Mo-Fr 10:00-16:00, Sa 07:30-11:30",
      "image": "https://gps-chhindibirhi.netlify.app/images/school-front.jpg",
      "foundingDate": "1995",
      "numberOfStudents": 21
    }
    </script>
  <!--To Here If Error-->
  
</head>
<body>
  <header>
    <a href="index.html" class="header-link" aria-label="Return to homepage">
      <div class="logo-placeholder">
        <img src="images/school-logo.png" alt="Government Primary School Chhindibirhi Logo" class="logo" loading="lazy">
        <span class="lang-hindi" lang="hi">üè´ ‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ, ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä</span>
        <span class="lang-english" lang="en">Government Primary School, Chhindibirhi</span>
      </div>
    </a>
  </header>

  <nav class="navbar">
    <button class="menu-toggle" aria-label="Toggle navigation">‚ò∞</button>
    <div class="nav-links">
      <a href="index.html">‡§π‡•ã‡§Æ</a>
      <a href="about.html">‡§π‡§Æ‡§æ‡§∞‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç</a>
      <a href="gallery.html">‡§ó‡•à‡§≤‡§∞‡•Ä</a>
      <a href="contact.html">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</a>
      <a href="school-notice-board/frontend/index.html">‡§®‡•ã‡§ü‡§ø‡§∏ ‡§¨‡•ã‡§∞‡•ç‡§°</a>
    </div>
  </nav>

  <main>
    <section class="gallery">
      <h1 data-animate>
        <span class="lang-hindi" lang="hi">‡§ó‡•à‡§≤‡§∞‡•Ä</span>
        <span class="lang-english" lang="en">Gallery</span>
      </h1>
      <div class="gallery-grid top-level">
        <a href="?category=school_photos" class="gallery-card">
          <span class="lang-hindi" lang="hi">üì∑ ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§´‡•ã‡§ü‡•ã</span>
          <span class="lang-english" lang="en">School Photos</span>
        </a>
        <a href="?category=events" class="gallery-card">
          <span class="lang-hindi" lang="hi">üìÖ ‡§Ü‡§Ø‡•ã‡§ú‡§®</span>
          <span class="lang-english" lang="en">Events</span>
        </a>
        <a href="?category=other_folders" class="gallery-card">
          <span class="lang-hindi" lang="hi">üìÇ ‡§Ö‡§®‡•ç‡§Ø ‡§´‡•ã‡§≤‡•ç‡§°‡§∞</span>
          <span class="lang-english" lang="en">Other Folders</span>
        </a>
      </div>

      <div id="subGallery" class="gallery-grid sub-level" style="display: none;"></div>
      <div id="photoGrid" class="gallery-grid photo-level" style="display: none;">
        <button id="downloadAll" style="display: none;" class="download-all-btn">
          <span class="lang-hindi" lang="hi">‡§∏‡§≠‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞‡•á‡§Ç ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</span>
          <span class="lang-english" lang="en">Download All Photos</span>
        </button>
      </div>
      <p class="gallery-note">
        <span class="lang-hindi" lang="hi">‡§®‡•ã‡§ü: ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞‡•á‡§Ç ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§</span>
        <span class="lang-english" lang="en">Note: Photos can be obtained from the school office.</span>
      </p>
    </section>

    <!-- Modal for zoomed image view -->
    <div id="imageModal" class="modal" style="display: none;">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <img id="modalImage" class="modal-content" alt="Zoomed image">
      <div class="modal-controls">
        <button id="prevBtn" onclick="changeImage(-1)">&#10094;</button>
        <button id="nextBtn" onclick="changeImage(1)">&#10095;</button>
        <a id="downloadBtn" class="download-btn" download>
          <span class="lang-hindi" lang="hi">‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°</span>
          <span class="lang-english" lang="en">Download</span>
        </a>
      </div>
    </div>
  </main>

  <footer>
    <p><span class="lang-hindi" lang="hi">¬© 2025 ‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§æ‡§≤‡§æ, ‡§õ‡§ø‡§Ç‡§¶‡§ø‡§¨‡§ø‡§∞‡§π‡•Ä</span><span class="lang-english" lang="en">Government Primary School, Chhindibirhi</span></p>
  </footer>
<!---
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category');
    const subGallery = document.getElementById('subGallery');
    const photoGrid = document.getElementById('photoGrid');
    const downloadAllBtn = document.getElementById('downloadAll');
    let currentImageIndex = 0;
    let images = [];

    if (category) {
      document.querySelector('.top-level').style.display = 'none';
      subGallery.style.display = 'grid';

      const subFolders = {
        'school_photos': ['inside', 'outside'],
        'events': ['independence_day_2024', 'independence_day_2025', 'sports_day_2025'],
        'other_folders': ['plantation_drive', 'classroom_activities', 'cultural_programs']
      };

      subFolders[category].forEach(folder => {
        const card = document.createElement('a');
        card.href = `?category=${category}&subfolder=${folder}`;
        card.className = 'gallery-card';
        card.innerHTML = `
          <span class="lang-hindi" lang="hi">üì∑ ${folder.replace(/_/g, ' ').toUpperCase()}</span>
          <span class="lang-english" lang="en">${folder.replace(/_/g, ' ')}</span>
        `;
        subGallery.appendChild(card);
      });
    }

    const subfolder = urlParams.get('subfolder');
    if (subfolder) {
      subGallery.style.display = 'none';
      photoGrid.style.display = 'grid';
      downloadAllBtn.style.display = 'block';

      // Define image counts per subfolder
      const photoCounts = {
        'school_photos': {
          'inside': 23,
          'outside': 93
        },
        'events': {
          'independence_day_2024': 0,
          'independence_day_2025': 0,
          'sports_day_2025': 0
        },
        'other_folders': {
          'plantation_drive': 0,
          'classroom_activities': 0,
          'cultural_programs': 0
        }
      };

      const photoCount = (photoCounts[category] && photoCounts[category][subfolder]) || 0;

      images = Array.from({ length: photoCount }, (_, i) => `images/gallery/${category}/${subfolder}/image (${i + 1}).jpg`);

      for (let i = 1; i <= photoCount; i++) {
        const photo = document.createElement('div');
        photo.className = 'gallery-photo';
        photo.innerHTML = `<img src="images/gallery/${category}/${subfolder}/image (${i}).jpg" alt="${subfolder} Photo ${i}" loading="lazy" onerror="this.src='images/fallback.png'">`;
        photo.addEventListener('click', () => openModal(i - 1));
        photoGrid.appendChild(photo);
      }

      // Download all images as ZIP
      downloadAllBtn.addEventListener('click', () => {
        const zip = new JSZip();
        const folder = zip.folder(subfolder);
        let loadedImages = 0;

        images.forEach((src, index) => {
          fetch(src)
            .then(response => response.blob())
            .then(blob => {
              folder.file(`image (${index + 1}).jpg`, blob);
              loadedImages++;
              if (loadedImages === images.length) {
                zip.generateAsync({ type: 'blob' }).then(content => {
                  const link = document.createElement('a');
                  link.href = URL.createObjectURL(content);
                  link.download = `${subfolder}.zip`;
                  link.click();
                  URL.revokeObjectURL(link.href);
                });
              }
            })
            .catch(() => {
              loadedImages++;
              if (loadedImages === images.length) {
                zip.generateAsync({ type: 'blob' }).then(content => {
                  const link = document.createElement('a');
                  link.href = URL.createObjectURL(content);
                  link.download = `${subfolder}.zip`;
                  link.click();
                  URL.revokeObjectURL(link.href);
                });
              }
            });
        });
      });
    }

    // Modal functions
    function openModal(index) {
      currentImageIndex = index;
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      const downloadBtn = document.getElementById('downloadBtn');
      modal.style.display = 'block';
      modalImg.src = images[currentImageIndex];
      downloadBtn.href = images[currentImageIndex];
      downloadBtn.download = `image (${currentImageIndex + 1}).jpg`;
    }

    function closeModal() {
      document.getElementById('imageModal').style.display = 'none';
    }

    function changeImage(direction) {
      currentImageIndex = (currentImageIndex + direction + images.length) % images.length;
      const modalImg = document.getElementById('modalImage');
      const downloadBtn = document.getElementById('downloadBtn');
      modalImg.src = images[currentImageIndex];
      downloadBtn.href = images[currentImageIndex];
      downloadBtn.download = `image (${currentImageIndex + 1}).jpg`;
    }

    // Close modal on outside click
    window.addEventListener('click', (event) => {
      const modal = document.getElementById('imageModal');
      if (event.target === modal) {
        closeModal();
      }
    });

    // Sidebar menu toggle
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    menuToggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
      menuToggle.textContent = navLinks.classList.contains('active') ? '‚úï' : '‚ò∞';
    });

    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('active');
        menuToggle.textContent = '‚ò∞';
      });
    });
  </script>
  ---->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
  const urlParams = new URLSearchParams(window.location.search);
  const category = urlParams.get('category');
  const subfolder = urlParams.get('subfolder');
  const subGallery = document.getElementById('subGallery');
  const photoGrid = document.getElementById('photoGrid');
  const downloadAllBtn = document.getElementById('downloadAll');
  let currentImageIndex = 0;
  let images = [];

  // Show loading state
  function setLoading(state) {
    if (state) {
      downloadAllBtn.disabled = true;
      downloadAllBtn.innerHTML = '<span class="lang-hindi">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span><span class="lang-english">Loading...</span>';
      downloadAllBtn.style.opacity = '0.7';
    } else {
      downloadAllBtn.disabled = false;
      downloadAllBtn.innerHTML = '<span class="lang-hindi">‡§∏‡§≠‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞‡•á‡§Ç ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</span><span class="lang-english">Download All Photos</span>';
      downloadAllBtn.style.opacity = '1';
    }
  }

  if (category && subfolder) {
    subGallery.style.display = 'none';
    photoGrid.style.display = 'grid';

    const photoCounts = {
      'school_photos': { 'inside': 23, 'outside': 93 },
      'events': { 'independence_day_2024': 0, 'independence_day_2025': 0, 'sports_day_2025': 0 },
      'other_folders': { 'plantation_drive': 0, 'classroom_activities': 0, 'cultural_programs': 0 }
    };

    const photoCount = (photoCounts[category]?.[subfolder]) || 0;

    if (photoCount === 0) {
      downloadAllBtn.style.display = 'none';
      photoGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--error-color);">No photos available in this folder yet.</p>';
      return;
    }

    downloadAllBtn.style.display = 'block';
    images = Array.from({ length: photoCount }, (_, i) => `images/gallery/${category}/${subfolder}/image (${i + 1}).jpg`);

    // Load thumbnails
    images.forEach((src, i) => {
      const photo = document.createElement('div');
      photo.className = 'gallery-photo';
      const img = document.createElement('img');
      img.src = src;
      img.alt = `${subfolder} Photo ${i + 1}`;
      img.loading = 'lazy';
      img.onerror = () => { img.src = 'images/fallback.png'; };
      img.onclick = () => openModal(i);
      photo.appendChild(img);
      photoGrid.appendChild(photo);
    });

    // Download All with proper error handling
    downloadAllBtn.addEventListener('click', async () => {
      setLoading(true);
      const zip = new JSZip();
      const folder = zip.folder(subfolder.replace(/_/g, ' '));
      let loaded = 0;
      let failed = 0;

      const promises = images.map((src, i) =>
        fetch(src)
          .then(res => {
            if (!res.ok) throw new Error(`HTTP ${res.status}`);
            return res.blob();
          })
          .then(blob => {
            folder.file(`image_${i + 1}.jpg`, blob);
            loaded++;
          })
          .catch(err => {
            console.warn(`Failed to load image ${i + 1}:`, err);
            failed++;
            loaded++; // Still count to avoid hanging
          })
      );

      // Wait for all
      await Promise.all(promises);

      if (loaded === 0) {
        alert('No images could be downloaded. Check folder path and image files.');
        setLoading(false);
        return;
      }

      // Generate ZIP
      zip.generateAsync({ type: 'blob' }).then(content => {
        const url = URL.createObjectURL(content);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${subfolder.replace(/_/g, ' ')}.zip`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);

        // Delay revocation
        setTimeout(() => URL.revokeObjectURL(url), 100);

        setLoading(false);
        alert(`Download complete! ${loaded - failed} images included.`);
      }).catch(err => {
        console.error('ZIP generation failed:', err);
        alert('Failed to create ZIP file.');
        setLoading(false);
      });
    });
  }

  // === Modal Functions ===
  function openModal(index) {
    currentImageIndex = index;
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const downloadBtn = document.getElementById('downloadBtn');
    modal.style.display = 'flex';
    modalImg.src = images[index];
    downloadBtn.href = images[index];
    downloadBtn.download = `image_${index + 1}.jpg`;
  }

  function closeModal() {
    document.getElementById('imageModal').style.display = 'none';
  }

  function changeImage(dir) {
    currentImageIndex = (currentImageIndex + dir + images.length) % images.length;
    document.getElementById('modalImage').src = images[currentImageIndex];
    document.getElementById('downloadBtn').href = images[currentImageIndex];
    document.getElementById('downloadBtn').download = `image_${currentImageIndex + 1}.jpg`;
  }

  window.addEventListener('click', (e) => {
    const modal = document.getElementById('imageModal');
    if (e.target === modal) closeModal();
  });

  // Mobile menu
  document.querySelector('.menu-toggle').addEventListener('click', () => {
    const nav = document.querySelector('.nav-links');
    nav.classList.toggle('active');
    document.querySelector('.menu-toggle').textContent = nav.classList.contains('active') ? '‚úï' : '‚ò∞';
  });
</script>
</body>
</html>