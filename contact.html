<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Contact Government Primary School, Chhindibirhi for inquiries." />
  <title>рд╕рдВрдкрд░реНрдХ - рд╢рд╛рд╕рдХреАрдп рдкреНрд░рд╛рдердорд┐рдХ рд╢рд╛рд▓рд╛, рдЫрд┐рдВрджрд┐рдмрд┐рд░рд╣реА</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="images/school-logo.png" type="image/png" />
</head>
<body>
  <header>
    <a href="index.html" class="header-link" aria-label="Return to homepage">
      <div class="logo-placeholder">
        <img src="images/school-logo.png" alt="Government Primary School Chhindibirhi Logo" class="logo" loading="lazy">
        <span class="lang-hindi" lang="hi">ЁЯПл рд╢рд╛рд╕рдХреАрдп рдкреНрд░рд╛рдердорд┐рдХ рд╢рд╛рд▓рд╛, рдЫрд┐рдВрджрд┐рдмрд┐рд░рд╣реА</span>
        <span class="lang-english" lang="en">Government Primary School, Chhindibirhi</span>
      </div>
    </a>
  </header>

  <nav class="navbar">
    <button class="menu-toggle" aria-label="Toggle navigation">тШ░</button>
    <div class="nav-links">
      <a href="index.html">рд╣реЛрдо</a>
      <a href="about.html">рд╣рдорд╛рд░реЗ рдмрд╛рд░реЗ рдореЗрдВ</a>
      <a href="gallery.html">рдЧреИрд▓рд░реА</a>
      <a href="contact.html">рд╕рдВрдкрд░реНрдХ</a>
      <a href="school-notice-board/frontend/index.html">рдиреЛрдЯрд┐рд╕ рдмреЛрд░реНрдб</a>
    </div>
  </nav>

  <main>
    <section class="contact">
      <h1 data-animate>
        <span class="lang-hindi" lang="hi">рд╕рдВрдкрд░реНрдХ</span>
        <span class="lang-english" lang="en">Contact Us</span>
      </h1>
      <p><strong><span class="lang-hindi" lang="hi">рд╕реНрдХреВрд▓ рдЬрд╛рдирдХрд╛рд░реА</span><span class="lang-english" lang="en">School Information</span></strong></p>
      <p><strong><span class="lang-hindi" lang="hi">рдирд╛рдо:</span><span class="lang-english" lang="en">Name:</span></strong> <span class="lang-hindi" lang="hi">рд╕рд░рдХрд╛рд░реА рдкреНрд░рд╛рдердорд┐рдХ рд╕реНрдХреВрд▓, рдЫрд┐рдВрджрд┐рдмрд┐рд░рд╣реА</span><span class="lang-english" lang="en">Government Primary School, Chhindibirhi</span></p>
      <p><strong><span class="lang-hindi" lang="hi">рдмреНрд▓реЙрдХ:</span><span class="lang-english" lang="en">Block:</span></strong> <span class="lang-hindi" lang="hi">рдХреЛрдгреНрдбрд╛рдЧрд╛рдВрд╡</span><span class="lang-english" lang="en">Kondagaon</span></p>
      <p><strong><span class="lang-hindi" lang="hi">рдЬрд┐рд▓рд╛:</span><span class="lang-english" lang="en">District:</span></strong> <span class="lang-hindi" lang="hi">рдХреЛрдгреНрдбрд╛рдЧрд╛рдВрд╡, рдЫрддреНрддреАрд╕рдЧрдврд╝</span><span class="lang-english" lang="en">Kondagaon, Chhattisgarh</span></p>
      <p><strong><span class="lang-hindi" lang="hi">рдлреЛрди:</span><span class="lang-english" lang="en">Phone:</span></strong> <span class="lang-hindi" lang="hi">+91-98765-43210</span><span class="lang-english" lang="en">+91-98765-43210</span></p>
      <p><strong><span class="lang-hindi" lang="hi">рдИрдореЗрд▓:</span><span class="lang-english" lang="en">Email:</span></strong> <span class="lang-hindi" lang="hi">gps.chhindibirhi@cg.gov.in</span><span class="lang-english" lang="en">gps.chhindibirhi@cg.gov.in</span></p>

      <h2 data-animate>
        <span class="lang-hindi" lang="hi">ЁЯХТ рд╕реНрдХреВрд▓ рд╕рдордп</span>
        <span class="lang-english" lang="en">School Timings</span>
      </h2>
      <ul class="timings-list">
        <li><span class="lang-hindi" lang="hi">рд╕реЛрдорд╡рд╛рд░ - рд╢реБрдХреНрд░рд╡рд╛рд░: 10:00 рдкреВрд░реНрд╡рд╛рд╣реНрди - 4:00 рдЕрдкрд░рд╛рд╣реНрди</span><span class="lang-english" lang="en">Monday тАУ Friday: 10:00 AM тАУ 4:00 PM</span></li>
        <li><span class="lang-hindi" lang="hi">рд╢рдирд┐рд╡рд╛рд░: 7:00 рдкреВрд░реНрд╡рд╛рд╣реНрди - 12:30 рдЕрдкрд░рд╛рд╣реНрди</span><span class="lang-english" lang="en">Saturday: 7:00 AM тАУ 12:30 PM</span></li>
        <li><span class="lang-hindi" lang="hi">рд░рд╡рд┐рд╡рд╛рд░: рдмрдВрдж</span><span class="lang-english" lang="en">Sunday: Closed</span></li>
      </ul>

      <h2 data-animate>
        <span class="lang-hindi" lang="hi">ЁЯЧ║я╕П рд╕реНрдерд╛рди</span>
        <span class="lang-english" lang="en">Location</span>
      </h2>
      <p><span class="lang-hindi" lang="hi">рд╣рдорд╛рд░рд╛ рд╕реНрдХреВрд▓ рдЫрд┐рдВрджрд┐рдмрд┐рд░рд╣реА рдЧрд╛рдБрд╡ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИред</span><span class="lang-english" lang="en">Our school is located in the heart of Chhindibirhi village.</span></p>
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3532.965734379136!2d80.93361081057029!3d20.908910480630134!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a2953ac5a10e631%3A0x6cc660864b7e147a!2z4KS24KS-4KS44KSV4KWA4KSvIOCkquCljeCksOCkvuCkpeCkruCkv-CklSDgpLbgpL7gpLLgpL4g4KSb4KS_4KSC4KSm4KWA4KSs4KS_4KSw4KS54KWA!5e1!3m2!1sen!2sin!4v1760533264065!5m2!1sen!2sin" width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

      <h2 data-animate>
        <span class="lang-hindi" lang="hi">рд╣рдорд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ</span>
        <span class="lang-english" lang="en">Get in Touch</span>
      </h2>
      <form id="contactForm" class="contact-form">
        <label for="name"><span class="lang-hindi" lang="hi">рдирд╛рдо</span><span class="lang-english" lang="en">Name</span> <span class="required">*</span></label>
        <input type="text" id="name" name="name" placeholder="рдЕрдкрдирд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ | Enter your name" required aria-describedby="name-hint">
        <span id="name-hint" class="sr-only">Please enter your full name</span>
        <label for="email"><span class="lang-hindi" lang="hi">рдИрдореЗрд▓</span><span class="lang-english" lang="en">Email</span></label>
        <input type="email" id="email" name="email" placeholder="рдЕрдкрдирд╛ рдИрдореЗрд▓ рд▓рд┐рдЦреЗрдВ | Enter your email" aria-describedby="email-hint">
        <span id="email-hint" class="sr-only">Enter a valid email address (optional, but either email or phone is required)</span>
        <label for="phone"><span class="lang-hindi" lang="hi">рдлреЛрди</span><span class="lang-english" lang="en">Phone</span></label>
        <input type="tel" id="phone" name="phone" placeholder="рдЕрдкрдирд╛ рдлреЛрди рдирдВрдмрд░ рд▓рд┐рдЦреЗрдВ | Enter your phone" value="+91 " aria-describedby="phone-hint">
        <span id="phone-hint" class="sr-only">Enter a valid 10-digit phone number starting with +91 (optional, but either email or phone is required)</span>
        <label for="message"><span class="lang-hindi" lang="hi">рд╕рдВрджреЗрд╢</span><span class="lang-english" lang="en">Message</span> <span class="required">*</span></label>
        <textarea id="message" name="message" placeholder="рдЕрдкрдирд╛ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦреЗрдВ | Enter your message" required></textarea>
        <button type="submit" id="submitBtn">рдЬрдорд╛ рдХрд░реЗрдВ | Submit</button>
        <p id="formResponse" class="form-note" aria-live="polite"></p>
      </form>
    </section>
  </main>

  <footer>
    <p><span class="lang-hindi" lang="hi">┬й 2025 рд╢рд╛рд╕рдХреАрдп рдкреНрд░рд╛рдердорд┐рдХ рд╢рд╛рд▓рд╛, рдЫрд┐рдВрджрд┐рдмрд┐рд░рд╣реА</span><span class="lang-english" lang="en">Government Primary School, Chhindibirhi</span></p>
  </footer>

  <script>
    const form = document.getElementById('contactForm');
    const formResponse = document.getElementById('formResponse');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      formResponse.textContent = '';
      
      // Get form values
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const message = document.getElementById('message').value.trim();

      // Reset invalid field styles
      document.querySelectorAll('.contact-form input, .contact-form textarea').forEach(field => {
        field.classList.remove('invalid');
      });

      // Validate required fields
      if (!name) {
        formResponse.textContent = 'рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ | Please enter your name';
        formResponse.style.color = '#d32f2f';
        document.getElementById('name').classList.add('invalid');
        return;
      }
      if (!message) {
        formResponse.textContent = 'рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рд╕рдВрджреЗрд╢ рджрд░реНрдЬ рдХрд░реЗрдВ | Please enter your message';
        formResponse.style.color = '#d32f2f';
        document.getElementById('message').classList.add('invalid');
        return;
      }
      if (!email && !phone) {
        formResponse.textContent = 'рдХреГрдкрдпрд╛ рдИрдореЗрд▓ рдпрд╛ рдлреЛрди рдирдВрдмрд░ рдореЗрдВ рд╕реЗ рдПрдХ рджрд░реНрдЬ рдХрд░реЗрдВ | Please enter either an email or phone number';
        formResponse.style.color = '#d32f2f';
        document.getElementById('email').classList.add('invalid');
        document.getElementById('phone').classList.add('invalid');
        return;
      }

      // Validate email if provided
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (email && !emailRegex.test(email)) {
        formResponse.textContent = 'рдХреГрдкрдпрд╛ рд╡реИрдз рдИрдореЗрд▓ рджрд░реНрдЬ рдХрд░реЗрдВ | Please enter a valid email';
        formResponse.style.color = '#d32f2f';
        document.getElementById('email').classList.add('invalid');
        return;
      }

      // Validate phone if provided (must start with +91 and have 10 digits)
      const phoneRegex = /^\+91\s?\d{10}$/;
      if (phone && phone !== '+91 ' && !phoneRegex.test(phone)) {
        formResponse.textContent = 'рдХреГрдкрдпрд╛ рд╡реИрдз 10 рдЕрдВрдХреЛрдВ рдХрд╛ рдлреЛрди рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ (+91 рдХреЗ рд╕рд╛рде) | Please enter a valid 10-digit phone number (with +91)';
        formResponse.style.color = '#d32f2f';
        document.getElementById('phone').classList.add('invalid');
        return;
      }

      // Show loading state
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="spinner"></span> рдЬрдорд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ... | Submitting...';
      submitBtn.classList.add('loading');

      // Create timeout promise (10 seconds)
      const timeoutPromise = new Promise((_, reject) => 
        setTimeout(() => reject(new Error('Request timeout')), 10000)
      );

      try {
        // Fetch with timeout
        const response = await Promise.race([
          fetch('https://school-backend-14ld.onrender.com/api/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, phone: phone === '+91 ' ? '' : phone, message })
          }),
          timeoutPromise
        ]);

        // Check if response is ok (e.g., 200-299)
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        let data;
        try {
          data = await response.json();
        } catch (jsonError) {
          // If JSON parsing fails, assume success since DB saves
          data = { message: 'рдЖрдкрдХрд╛ рд╕рдВрджреЗрд╢ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рднреЗрдЬрд╛ рдЧрдпрд╛! | Your message was sent successfully!' };
          console.warn('JSON parse error, assuming success:', jsonError);
        }

        formResponse.textContent = data.message || 'рдЖрдкрдХрд╛ рд╕рдВрджреЗрд╢ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рднреЗрдЬрд╛ рдЧрдпрд╛! | Your message was sent successfully!';
        formResponse.style.color = '#2e7d32';

        // Clear form on success
        form.reset();
        document.getElementById('phone').value = '+91 '; // Reset phone with +91

      } catch (error) {
        // Distinguish between HTTP errors and network/timeout
        if (error.name === 'TypeError' || error.message.includes('timeout')) {
          formResponse.textContent = 'рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рддреНрд░реБрдЯрд┐ рдпрд╛ рдЯрд╛рдЗрдордЖрдЙрдЯред рдХреГрдкрдпрд╛ рдмрд╛рдж рдореЗрдВ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред | Connection error or timeout. Please try again later.';
        } else {
          formResponse.textContent = 'рд╕рд░реНрд╡рд░ рддреНрд░реБрдЯрд┐ред рдЖрдкрдХрд╛ рд╕рдВрджреЗрд╢ рд╕рдВрднрд╡рддрдГ рднреЗрдЬрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкреБрд╖реНрдЯрд┐ рдирд╣реАрдВ рд╣реЛ рд╕рдХреАред | Server error. Your message may have been sent, but confirmation failed.';
        }
        formResponse.style.color = '#d32f2f';
        console.error('Form submission error:', error);

        // Clear form anyway (since DB saves immediately)
        form.reset();
        document.getElementById('phone').value = '+91 ';
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'рдЬрдорд╛ рдХрд░реЗрдВ | Submit';
        submitBtn.classList.remove('loading');
      }
    });

    // Ensure +91 stays in phone input
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', () => {
      if (!phoneInput.value.startsWith('+91 ')) {
        phoneInput.value = '+91 ' + phoneInput.value.replace(/^\+91\s?/, '');
      }
    });

    // Sidebar menu toggle
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    menuToggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
      menuToggle.textContent = navLinks.classList.contains('active') ? 'тЬХ' : 'тШ░';
    });

    // Close sidebar on link click
    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('active');
        menuToggle.textContent = 'тШ░';
      });
    });
  </script>
</body>
</html>